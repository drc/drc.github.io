<!doctype html><html lang=en-us><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Setting Up Mid Server using Docker | Dan Cigrang</title><link rel=canonical href=https://dancigrang.dev/posts/2022/setting-up-mid-server-docker/><meta name=description content="Description update"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Setting Up Mid Server using Docker"><meta property="og:description" content="NOTE: Getting my notes out there first, need to re-write this better at a later date, with images and code samples.
Download the Docker config from the MID Server downloads page on the instance.
Included is the Dockerfile and other supporting documents to run the mid server.
I am running an Oracle Cloud Instance of ARM Ubuntu, the out-of-box configuration of this Dockerfile will not work for me.
I first updated the Dockerfile to use Amazon Corretto (openjdk) image rather than CentOS."><meta property="og:type" content="article"><meta property="og:url" content="https://dancigrang.dev/posts/2022/setting-up-mid-server-docker/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-09-01T16:29:35-05:00"><meta property="article:modified_time" content="2022-09-01T16:29:35-05:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Setting Up Mid Server using Docker"><meta name=twitter:description content="NOTE: Getting my notes out there first, need to re-write this better at a later date, with images and code samples.
Download the Docker config from the MID Server downloads page on the instance.
Included is the Dockerfile and other supporting documents to run the mid server.
I am running an Oracle Cloud Instance of ARM Ubuntu, the out-of-box configuration of this Dockerfile will not work for me.
I first updated the Dockerfile to use Amazon Corretto (openjdk) image rather than CentOS."><link rel=stylesheet href=https://dancigrang.dev/css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N+XoIuZg=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://dancigrang.dev/images/favicon.ico></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://dancigrang.dev/about/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f&text=Setting%20Up%20Mid%20Server%20using%20Docker" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f&title=Setting%20Up%20Mid%20Server%20using%20Docker" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f&is_video=false&description=Setting%20Up%20Mid%20Server%20using%20Docker" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Setting%20Up%20Mid%20Server%20using%20Docker&body=Check out this article: https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f&title=Setting%20Up%20Mid%20Server%20using%20Docker" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f&title=Setting%20Up%20Mid%20Server%20using%20Docker" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f&name=Setting%20Up%20Mid%20Server%20using%20Docker&description=NOTE%3a%20Getting%20my%20notes%20out%20there%20first%2c%20need%20to%20re-write%20this%20better%20at%20a%20later%20date%2c%20with%20images%20and%20code%20samples.%0aDownload%20the%20Docker%20config%20from%20the%20MID%20Server%20downloads%20page%20on%20the%20instance.%0aIncluded%20is%20the%20Dockerfile%20and%20other%20supporting%20documents%20to%20run%20the%20mid%20server.%0aI%20am%20running%20an%20Oracle%20Cloud%20Instance%20of%20ARM%20Ubuntu%2c%20the%20out-of-box%20configuration%20of%20this%20Dockerfile%20will%20not%20work%20for%20me.%0aI%20first%20updated%20the%20Dockerfile%20to%20use%20Amazon%20Corretto%20%28openjdk%29%20image%20rather%20than%20CentOS." aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f&t=Setting%20Up%20Mid%20Server%20using%20Docker" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Setting Up Mid Server using Docker</h1><div class=meta><div class=postdate><time datetime="2022-09-01 16:29:35 -0500 -0500" itemprop=datePublished>2022-09-01</time></div><div class=article-read-time><i class="far fa-clock"></i>
1 minute read</div></div></header><div class=content itemprop=articleBody><p>NOTE: Getting my notes out there first, need to re-write this better at a later date, with images and code samples.</p><p>Download the Docker config from the MID Server downloads page on the instance.</p><p>Included is the <code>Dockerfile</code> and other supporting documents to run the mid server.</p><p>I am running an Oracle Cloud Instance of ARM Ubuntu, the out-of-box configuration of this <code>Dockerfile</code> will not work for me.</p><p>I first updated the <code>Dockerfile</code> to use Amazon Corretto (openjdk) image rather than CentOS. I know Amazon Corretto has a build of java that will work with ARM, rather than using the packaged jvm from ServiceNow.</p><p>After updating the Dockerfile, I needed to update the <code>mid.env</code> file with all necessary parameters to connect to the instance.</p><p>One thing that wasn&rsquo;t listed in any documentation was the setup of <code>wrapper-override.conf</code> also reading the env file, and you need to create any variables you want to replace in the <code>wrapper-override.conf</code> file.</p><p>Since I am using a different jvm, I had to update the <code>wrapper-override.conf</code> section for the instance of java to use: <code>wrapper.java.command</code></p><p>To let the automation update this for you, just need to add a line in the <code>mid.env</code> file: <code>MID_WRAPPER_wrapper.java.command=/usr/bin/java</code></p><p>I noticed that every time you start and stop the container, the instance detects that the keystore you generate when hitting Validate MID Server gets blown away. Using the corretto instance, I found the keystore being set in <code>/usr/lib/jvm/java-1.8.0-amazon-corretto/jre/lib/security</code> directory. Knowing this, I had to copy the files out of here first to a local directory, and then when running the container, mount my local directory to the container.</p><p>This allows my Docker instance to not have to revalidate every time you start/stop the container.</p></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f&text=Setting%20Up%20Mid%20Server%20using%20Docker" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f&title=Setting%20Up%20Mid%20Server%20using%20Docker" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f&is_video=false&description=Setting%20Up%20Mid%20Server%20using%20Docker" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Setting%20Up%20Mid%20Server%20using%20Docker&body=Check out this article: https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f&title=Setting%20Up%20Mid%20Server%20using%20Docker" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f&title=Setting%20Up%20Mid%20Server%20using%20Docker" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f&name=Setting%20Up%20Mid%20Server%20using%20Docker&description=NOTE%3a%20Getting%20my%20notes%20out%20there%20first%2c%20need%20to%20re-write%20this%20better%20at%20a%20later%20date%2c%20with%20images%20and%20code%20samples.%0aDownload%20the%20Docker%20config%20from%20the%20MID%20Server%20downloads%20page%20on%20the%20instance.%0aIncluded%20is%20the%20Dockerfile%20and%20other%20supporting%20documents%20to%20run%20the%20mid%20server.%0aI%20am%20running%20an%20Oracle%20Cloud%20Instance%20of%20ARM%20Ubuntu%2c%20the%20out-of-box%20configuration%20of%20this%20Dockerfile%20will%20not%20work%20for%20me.%0aI%20first%20updated%20the%20Dockerfile%20to%20use%20Amazon%20Corretto%20%28openjdk%29%20image%20rather%20than%20CentOS." aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fdancigrang.dev%2fposts%2f2022%2fsetting-up-mid-server-docker%2f&t=Setting%20Up%20Mid%20Server%20using%20Docker" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2022 Dan Cigrang</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script></html>